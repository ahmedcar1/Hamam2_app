
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>إدارة الحمام الغزار</title>
    <style>
        body {
            font-family: Tahoma, sans-serif;
            padding: 0; margin: 0;
            background-color: #eef4ff;
        }
        header, footer {
            background: #4CAF50;
            color: white;
            text-align: center;
            padding: 12px;
        }
        nav {
            display: flex;
            justify-content: space-around;
            background: #333;
        }
        nav button {
            flex: 1;
            padding: 10px;
            color: white;
            background: #333;
            border: none;
            font-size: 16px;
            cursor: pointer;
        }
        nav button:hover {
            background: #4CAF50;
        }
        section {
            display: none;
            padding: 20px;
        }
        section.active {
            display: block;
        }
        input, textarea, select, button {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            font-size: 16px;
        }
        table {
            width: 100%;
            margin-top: 10px;
            border-collapse: collapse;
            background: white;
        }
        th, td {
            border: 1px solid #aaa;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #cce0ff;
        }
        .danger {
            background: #d9534f;
            color: white;
            border: none;
            padding: 5px 10px;
        }
    </style>
</head>
<body>

<header>
    <h1>تطبيق إدارة الحمام الغزار</h1>
</header>

<nav>
    <button onclick="showPage('main')">الرئيسية</button>
    <button onclick="showPage('treatments')">العلاجات</button>
    <button onclick="showPage('production')">الإنتاج والتقييم</button>
</nav>

<section id="main" class="active">
    <h2>الرئيسية - إدارة الأزواج</h2>
    <input type="text" id="code" placeholder="كود/اسم الجوز">
    <input type="date" id="entry">
    <textarea id="note" placeholder="ملاحظات"></textarea>
    <button onclick="addMain()">إضافة الجوز</button>
    <table id="mainTable">
        <thead>
            <tr><th>الكود</th><th>التاريخ</th><th>ملاحظات</th><th>حذف</th></tr>
        </thead>
        <tbody></tbody>
    </table>
</section>

<section id="treatments">
    <h2>جدول العلاجات</h2>
    <table>
        <thead>
            <tr><th>الحالة</th><th>الدواء</th><th>الجرعة</th><th>المدة</th></tr>
        </thead>
        <tbody>
            <tr><td>الكنكر</td><td>فلاجيل</td><td>1/8 قرص</td><td>5 أيام</td></tr>
            <tr><td>السالمونيلا</td><td>أمبيسيلين</td><td>1/8 مرتين</td><td>5-7 أيام</td></tr>
            <tr><td>الديدان</td><td>فلوفيرمال</td><td>1 سم</td><td>مرة وتُكرر</td></tr>
        </tbody>
    </table>
</section>

<section id="production">
    <h2>سجل الإنتاج والتقييم</h2>
    <input type="text" id="prodCode" placeholder="كود الجوز">
    <input type="number" id="eggs" placeholder="عدد البيض">
    <input type="number" id="hatched" placeholder="عدد المفقوس">
    <select id="rating">
        <option value="ممتاز">ممتاز</option>
        <option value="متوسط">متوسط</option>
        <option value="ضعيف">ضعيف</option>
    </select>
    <button onclick="addProd()">إضافة</button>
    <table id="prodTable">
        <thead>
            <tr><th>الكود</th><th>البيض</th><th>المفقوس</th><th>التقييم</th><th>حذف</th></tr>
        </thead>
        <tbody></tbody>
    </table>
</section>

<footer>
    تصميم وتطوير: أحمد خير
</footer>

<script>
function showPage(id) {
    document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

function addMain() {
    let code = document.getElementById("code").value.trim();
    let date = document.getElementById("entry").value;
    let note = document.getElementById("note").value.trim();
    if (!code || !date) return alert("يرجى إدخال البيانات الأساسية");

    let data = { id: Date.now(), code, date, note };
    let saved = JSON.parse(localStorage.getItem("mains") || "[]");
    saved.push(data);
    localStorage.setItem("mains", JSON.stringify(saved));
    renderMain(data);
    document.getElementById("code").value = "";
    document.getElementById("entry").value = "";
    document.getElementById("note").value = "";
}

function renderMain(d) {
    let row = document.getElementById("mainTable").querySelector("tbody").insertRow();
    row.innerHTML = `<td>${d.code}</td><td>${d.date}</td><td>${d.note}</td><td><button class='danger' onclick='delMain(${d.id}, this)'>X</button></td>`;
}

function delMain(id, btn) {
    let saved = JSON.parse(localStorage.getItem("mains") || "[]");
    saved = saved.filter(i => i.id !== id);
    localStorage.setItem("mains", JSON.stringify(saved));
    btn.closest("tr").remove();
}

function addProd() {
    let code = document.getElementById("prodCode").value.trim();
    let eggs = document.getElementById("eggs").value;
    let hatched = document.getElementById("hatched").value;
    let rate = document.getElementById("rating").value;
    if (!code || !eggs) return alert("يرجى إدخال الكود وعدد البيض");

    let data = { id: Date.now(), code, eggs, hatched, rate };
    let saved = JSON.parse(localStorage.getItem("prods") || "[]");
    saved.push(data);
    localStorage.setItem("prods", JSON.stringify(saved));
    renderProd(data);
    document.getElementById("prodCode").value = "";
    document.getElementById("eggs").value = "";
    document.getElementById("hatched").value = "";
}

function renderProd(d) {
    let row = document.getElementById("prodTable").querySelector("tbody").insertRow();
    row.innerHTML = `<td>${d.code}</td><td>${d.eggs}</td><td>${d.hatched}</td><td>${d.rate}</td><td><button class='danger' onclick='delProd(${d.id}, this)'>X</button></td>`;
}

function delProd(id, btn) {
    let saved = JSON.parse(localStorage.getItem("prods") || "[]");
    saved = saved.filter(i => i.id !== id);
    localStorage.setItem("prods", JSON.stringify(saved));
    btn.closest("tr").remove();
}

window.onload = () => {
    JSON.parse(localStorage.getItem("mains") || "[]").forEach(renderMain);
    JSON.parse(localStorage.getItem("prods") || "[]").forEach(renderProd);
};
</script>

</body>
</html>
